<!DOCTYPE html>
<html>
<head>
	<title>Media Server</title>
	<style>
		.media-container {
			display: flex;
			justify-content: center;
			align-items: center;
			height: 80vh;
		}
		.media-container img,
    .media-container video {
			max-width: 100%;
			max-height: 100%;
		}
		
		.navigation-buttons {
		display: flex;
		justify-content: center;
		margin-top: 1rem;
		}

		.navigation-buttons button {
		margin: 0 0.5rem;
		padding: 0.5rem 1rem;
		font-size: 1rem;
		}
	</style>
</head>
<body>
	<h1>Media server</h1>
	<!-- <div class="image-container">
		<img id="currentImage" src="" alt="Image">
		<video id="myVideo" controls autoplay>
			<source id="currentImage" src="" alt="Video" type=video/mp4>
		</video>
	</div> -->

  <div class="media-container" id="mediaContainer"></div>
	
	<div class="navigation-buttons">
		<button id="previousButton">Previous</button>
		<button id="nextButton">Next</button>
	</div>
	
	<script src="hammer.min.js"></script>
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script> -->
	<script>
		const mediaItems = [
			"images/1.jpg",
			"images/2.jpg",
			"images/3.jpg",
			"images/1.mp4",
			"images/2.mp4"
			];
		
		let currentIndex = 0;
		// const imageElement = document.getElementById("currentImage");
    const mediaContainer = document.getElementById("mediaContainer")
		
		const previousButton = document.getElementById("previousButton");
		const nextButton = document.getElementById("nextButton");
		
		previousButton.addEventListener('click', showPreviousMedia);
		nextButton.addEventListener('click', showNextMedia);
		
		const hammer = new Hammer(document.body);
		hammer.get('swipe').set({direction: Hammer.DIRECTION_HORIZONTAL});
		hammer.on('swipeleft', showNextMedia);
		hammer.on('swiperight', showPreviousMedia);
		
    function showNextMedia() {
      currentIndex = (currentIndex + 1) % mediaItems.length;
      updateMedia();
    }

    function showPreviousMedia() {
      currentIndex = (currentIndex - 1 + mediaItems.length) % mediaItems.length;
      updateMedia();
    }

    function updateMedia() {
      const mediaItem = mediaItems[currentIndex];
      // const {filename} = mediaItem;
    

      mediaContainer.innerHTML = '';

      const imageExtensions = ['jpg', 'jpeg', 'png'];
      const videoExtensions = ['mp4', 'webm', 'ogg'];
      const fileExt = getFileExt(mediaItem);


      if (imageExtensions.includes(fileExt)) {
        const img = document.createElement('img');
        img.src = mediaItem;
        mediaContainer.appendChild(img);
      }
      else if (videoExtensions.includes(fileExt)) {
        const video = document.createElement('video');
        video.src = mediaItem;
        video.controls = true;
        mediaContainer.appendChild(video);
      }
    }

    function getFileExt(filename) {
      return filename.split('.').pop().toLowerCase();
    }
		
		updateMedia();
	</script>
</body>
</html>